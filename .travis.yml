language: rust
sudo: false

before_script:
  # Retrieve and install latest mdbook version
  - misc/download-mdbook.sh 0.3.5
  - export PATH=$HOME/.mdbook:$PATH

script:
  - mdbook build && mdbook test

deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  local-dir: book
  keep-history: true
  on:
    branch: src
  target-branch: master
